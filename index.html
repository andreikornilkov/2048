<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>2048 ‚Äî Telegram Game</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="telegram-app">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div class="main-menu" id="main-menu">
            <div class="menu-content">
                <div class="top-bar">
                    <button class="icon-btn" id="main-menu-btn">‚ò∞</button>
                    <button class="icon-btn" id="main-themes-btn">üé®</button>
                </div>

                <div class="stats-header">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="total-games">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="total-wins">0</div>
                            <div class="stat-label">–ü–æ–±–µ–¥</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="best-score-overall">0</div>
                            <div class="stat-label">–†–µ–∫–æ—Ä–¥</div>
                        </div>
                    </div>
                </div>

                <div class="menu-buttons">
                    <button class="tg-button large mode-btn" data-mode="4x4">
                        <span class="button-title">4√ó4</span>
                        <span class="button-desc">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π (2048)</span>
                    </button>
                    <button class="tg-button large mode-btn" data-mode="5x5">
                        <span class="button-title">5√ó5</span>
                        <span class="button-desc">–†–µ–ª–∞–∫—Å (4096)</span>
                    </button>
                    <button class="tg-button large mode-btn" data-mode="4x4-time">
                        <span class="button-title">4√ó4</span>
                        <span class="button-desc">–ù–∞ –≤—Ä–µ–º—è (90 —Å–µ–∫—É–Ω–¥)</span>
                    </button>
                    <button class="tg-button large mode-btn" data-mode="5x5-zen">
                        <span class="button-title">5√ó5</span>
                        <span class="button-desc">–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –¥–∑–µ–Ω</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="game-screen" id="game-screen" style="display: none;">
            <header class="app-header">
                <div class="header-content">
                    <button class="menu-btn" id="game-menu-btn">‚ò∞</button>
                    <div class="game-stats">
                        <div class="stat-display" id="best-tile-container">
                            <span>–õ—É—á—à–∞—è –ø–ª–∏—Ç–∫–∞:</span>
                            <strong id="best-tile">0</strong>
                        </div>
                        <div class="stat-display" id="time-container" style="display: none;">
                            <span>–í—Ä–µ–º—è:</span>
                            <strong id="time-left">90</strong>
                        </div>
                        <div class="stat-display">
                            <span>–°—á–µ—Ç –∏–≥—Ä—ã:</span>
                            <strong id="score">0</strong>
                        </div>
                    </div>
                    <div class="new-record-badge" id="new-record-badge" style="display: none;">
                        –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!
                    </div>
                </div>
            </header>

            <main class="game-container">
                <div class="game-board" id="board"></div>
            </main>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div class="modal" id="game-end-modal"></div>
        <div class="modal" id="stats-modal"></div>

        <div class="modal" id="main-menu-modal">
            <div class="modal-content">
                <button class="close-btn" id="close-main-menu">√ó</button>
                <h3>–ú–µ–Ω—é</h3>
                <div class="menu-options">
                    <button class="tg-button secondary" id="main-stats-btn">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                    <button class="tg-button secondary" id="main-cheat-btn">–ß–∏—Ç –∫–æ–¥</button>
                    <div class="setting-option">
                        <span>–í–∏–±—Ä–∞—Ü–∏—è</span>
                        <label class="switch">
                            <input type="checkbox" id="main-vibration-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="in-game-menu-modal">
            <div class="modal-content">
                <button class="close-btn" id="close-game-menu">√ó</button>
                <h3>–ú–µ–Ω—é</h3>
                <div class="menu-options">
                    <button class="tg-button" id="restart-game-btn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                    <button class="tg-button secondary" id="to-lobby-btn">–í—ã–π—Ç–∏ –≤ –ª–æ–±–±–∏</button>
                    <button class="tg-button secondary" id="game-stats-btn">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                    <button class="tg-button secondary" id="game-cheat-btn">–ß–∏—Ç –∫–æ–¥</button>
                    <div class="setting-option">
                        <span>–í–∏–±—Ä–∞—Ü–∏—è</span>
                        <label class="switch">
                            <input type="checkbox" id="vibration-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="themes-modal">
            <div class="modal-content">
                <button class="close-btn" id="close-themes">√ó</button>
                <h3>–¢–µ–º—ã</h3>
                <div class="themes-grid">
                    <div class="theme-option" data-theme="default">
                        <div class="theme-preview" style="background: linear-gradient(135deg, #635BFF, #8B85FF);"></div>
                        <span>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</span>
                    </div>
                    <div class="theme-option" data-theme="green">
                        <div class="theme-preview" style="background: linear-gradient(135deg, #4CAF50, #45a049);"></div>
                        <span>–ó–µ–ª–µ–Ω–∞—è</span>
                    </div>
                    <div class="theme-option" data-theme="purple">
                        <div class="theme-preview" style="background: linear-gradient(135deg, #9C27B0, #7B1FA2);"></div>
                        <span>–§–∏–æ–ª–µ—Ç–æ–≤–∞—è</span>
                    </div>
                    <div class="theme-option" data-theme="orange">
                        <div class="theme-preview" style="background: linear-gradient(135deg, #FF9800, #F57C00);"></div>
                        <span>–û—Ä–∞–Ω–∂–µ–≤–∞—è</span>
                    </div>
                    <div class="theme-option" data-theme="blue">
                        <div class="theme-preview" style="background: linear-gradient(135deg, #2196F3, #1976D2);"></div>
                        <span>–°–∏–Ω—è—è</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="cheat-modal">
            <div class="modal-content">
                <button class="close-btn" id="close-cheat">√ó</button>
                <h3>–ß–∏—Ç –∫–æ–¥</h3>
                <div class="cheat-content">
                    <input type="text" 
                           id="cheat-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Ç –∫–æ–¥..."
                           maxlength="20"
                           class="cheat-input">
                    <button class="tg-button large" id="apply-cheat-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div class="modal" id="confirm-modal">
            <div class="modal-content">
                <h3 id="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
                <p id="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
                <div class="confirm-actions">
                    <button class="tg-button" id="confirm-yes">–î–∞</button>
                    <button class="tg-button secondary" id="confirm-no">–ù–µ—Ç</button>
                </div>
            </div>
        </div>

        <div class="modal" id="start-time-modal">
            <div class="modal-content">
                <h3>–ì–æ—Ç–æ–≤—ã?</h3>
                <p>–£ –≤–∞—Å –µ—Å—Ç—å 90 —Å–µ–∫—É–Ω–¥!</p>
                <button class="tg-button large" id="start-time-btn">–ù–∞—á–∞—Ç—å!</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="telegram.js"></script>
    <script src="game.js"></script>
</body>
</html>